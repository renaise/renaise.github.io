---
import Base from '../layouts/Base.astro';
import { labProjects } from '../data/projects-expanded';
---

<Base title="Lab of Renaise">
  <div class="h-screen w-screen overflow-hidden flex flex-col" style="background: linear-gradient(180deg, #E3E3E3 0%, #9B9B9B 100%);">

    <!-- Dot grid background -->
    <div class="dot-grid fixed inset-0 z-0 pointer-events-none" aria-hidden="true">
      <svg width="100%" height="100%">
        <pattern id="dots-lab" x="0" y="0" width="32" height="32" patternUnits="userSpaceOnUse">
          <circle cx="16" cy="16" r="1" fill="currentColor" />
        </pattern>
        <rect width="100%" height="100%" fill="url(#dots-lab)" />
      </svg>
    </div>

    <!-- Top Navigation -->
    <header class="relative z-10 flex items-center justify-between px-6 py-4 shrink-0">
      <a href="/" class="nav-pill">
        <span>‚Üê Stage</span>
      </a>
      <nav class="flex items-center gap-2">
        <a href="/lab" class="nav-pill nav-pill-active">Lab</a>
        <a href="mailto:hello@renaise.com" class="nav-pill">Contact</a>
      </nav>
    </header>

    <!-- Grid - fixed size squares, centered -->
    <div class="relative z-10 flex-1 flex items-center justify-center">
      <div class="grid grid-cols-3 gap-0">
        {labProjects.slice(0, 9).map((p, i) => (
          <a
            href={`/lab/${p.id}`}
            class="lab-cell relative w-[240px] h-[240px] border border-black/10 flex flex-col p-5 hover:bg-white/20 transition-colors"
          >
            <!-- Top row: Number + Year -->
            <div class="flex items-start justify-between mb-auto">
              <span class="w-6 h-6 flex items-center justify-center text-[11px] text-black/50 border border-black/20 rounded">
                {i + 1}
              </span>
              <span class="text-[11px] text-black/40 tracking-wide">
                {p.stage.year}
              </span>
            </div>

            <!-- Center: Title -->
            <h2 class="text-[14px] md:text-[16px] text-black/80 font-light uppercase tracking-wide text-center leading-tight my-auto px-2">
              {p.lab.title}
            </h2>

            <!-- Bottom: Service tags -->
            <div class="flex items-center justify-center gap-2 mt-auto flex-wrap">
              {p.serviceSuite.map((service, idx) => (
                <span class="flex items-center gap-2 text-[9px] uppercase tracking-widest text-black/40">
                  {idx > 0 && <span class="w-1 h-1 rounded-full bg-black/40"></span>}
                  {service}
                </span>
              ))}
            </div>
          </a>
        ))}
      </div>
    </div>

  </div>
</Base>

<style>
  .dot-grid {
    color: rgba(0, 0, 0, 0.08);
  }

  /* Nav pills */
  .nav-pill {
    padding: 10px 20px;
    font-size: 12px;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: rgba(0, 0, 0, 0.6);
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 100px;
    transition: all 0.2s ease;
  }

  .nav-pill:hover {
    background: rgba(255, 255, 255, 0.8);
    color: rgba(0, 0, 0, 0.8);
  }

  .nav-pill-active {
    background: rgba(0, 0, 0, 0.8);
    color: rgba(255, 255, 255, 0.9);
    border-color: transparent;
  }

  .nav-pill-active:hover {
    background: rgba(0, 0, 0, 0.9);
    color: white;
  }

</style>
