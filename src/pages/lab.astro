---
import Base from '../layouts/Base.astro';
import { labProjects } from '../data/projects-expanded';
---

<Base title="Lab of Renaise">
  <div class="h-screen w-screen overflow-hidden flex flex-col" style="background: linear-gradient(180deg, #E3E3E3 0%, #9B9B9B 100%);">

    <!-- Dot grid background -->
    <div class="dot-grid fixed inset-0 z-0 pointer-events-none" aria-hidden="true">
      <svg width="100%" height="100%">
        <pattern id="dots-lab" x="0" y="0" width="32" height="32" patternUnits="userSpaceOnUse">
          <circle cx="16" cy="16" r="1" fill="currentColor" />
        </pattern>
        <rect width="100%" height="100%" fill="url(#dots-lab)" />
      </svg>
    </div>

    <!-- Top Navigation -->
    <header class="relative z-10 flex items-center justify-between px-6 py-4 shrink-0">
      <a href="/" class="nav-pill">
        <span>‚Üê Stage</span>
      </a>
      <nav class="flex items-center gap-2">
        <a href="/lab" class="nav-pill nav-pill-active">Lab</a>
        <a href="mailto:hello@renaise.com" class="nav-pill">Contact</a>
      </nav>
    </header>

    <!-- Horizontal scrolling row of large square cards -->
    <div class="relative z-10 flex-1 flex items-center px-6 overflow-x-auto overflow-y-hidden">
      <div class="flex gap-0">
        {labProjects.map((p, i) => (
          <a
            href={`/lab/${p.id}`}
            class="lab-card flex-shrink-0 w-[380px] h-[380px] border border-white/20 flex flex-col p-6 hover:bg-white/10 transition-colors"
          >
            <!-- Top row: Number + Year -->
            <div class="flex items-start justify-between">
              <span class="w-8 h-8 flex items-center justify-center text-[13px] text-white/60 border border-white/30 rounded-full">
                {i + 1}
              </span>
              <span class="text-[13px] text-white/50 tracking-wide">
                {p.stage.year}
              </span>
            </div>

            <!-- Center: Title -->
            <h2 class="text-[24px] md:text-[28px] text-white/90 font-medium uppercase tracking-wide text-center leading-tight my-auto px-4">
              {p.lab.title}
            </h2>

            <!-- Bottom: Service tags -->
            <div class="flex items-center justify-center gap-3 flex-wrap">
              {p.serviceSuite.map((service, idx) => (
                <span class="flex items-center gap-3 text-[11px] uppercase tracking-widest text-white/50">
                  {idx > 0 && <span class="w-1.5 h-1.5 rounded-full bg-white/50"></span>}
                  {service}
                </span>
              ))}
            </div>
          </a>
        ))}
      </div>
    </div>

  </div>
</Base>

<style>
  .dot-grid {
    color: rgba(0, 0, 0, 0.08);
  }

  /* Nav pills */
  .nav-pill {
    padding: 10px 20px;
    font-size: 12px;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: rgba(0, 0, 0, 0.6);
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 100px;
    transition: all 0.2s ease;
  }

  .nav-pill:hover {
    background: rgba(255, 255, 255, 0.8);
    color: rgba(0, 0, 0, 0.8);
  }

  .nav-pill-active {
    background: rgba(0, 0, 0, 0.8);
    color: rgba(255, 255, 255, 0.9);
    border-color: transparent;
  }

  .nav-pill-active:hover {
    background: rgba(0, 0, 0, 0.9);
    color: white;
  }

  /* Hide scrollbar but allow scrolling */
  .overflow-x-auto {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .overflow-x-auto::-webkit-scrollbar {
    display: none;
  }

</style>
